(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-crm-thread-threadc"],{"43a5":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var a={topDropdown:n("2acf").default,getMore:n("12ec").default,dataNull:n("ee22").default,uActionSheet:n("1db7").default},o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("topDropdown",{attrs:{isSxShow:!0,isPaiXu:!0,dropdown1:e.dropdown1,options1:e.options1,optionsSx:e.sxList,optionsPx:e.optionsPx,isDuoXuan:!0,searchLabel1:"客户名称",searchPh1:"请输入客户名称"},on:{searchBoxEmitFun:function(t){arguments[0]=t=e.$handleEvent(t),e.searchBoxEmitFun.apply(void 0,arguments)},dropDownFun1:function(t){arguments[0]=t=e.$handleEvent(t),e.dropDownFun1.apply(void 0,arguments)},optionSxFun:function(t){arguments[0]=t=e.$handleEvent(t),e.optionSxFun.apply(void 0,arguments)},optionPxFun:function(t){arguments[0]=t=e.$handleEvent(t),e.optionPxFun.apply(void 0,arguments)}}}),n("v-uni-scroll-view",{style:{height:e.scrollHeight},attrs:{"scroll-y":"true","refresher-enabled":!0,"refresher-threshold":200,"refresher-triggered":e.triggered,"refresher-background":"gray"},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.selectKehuFun.apply(void 0,arguments)},refresherrefresh:function(t){arguments[0]=t=e.$handleEvent(t),e.onRefresh.apply(void 0,arguments)},refresherrestore:function(t){arguments[0]=t=e.$handleEvent(t),e.onRestore.apply(void 0,arguments)}}},[e.list.length>0?n("v-uni-view",[e._l(e.list,(function(t,a){return n("v-uni-view",{key:a},[n("threadCard",{attrs:{item:t,isSelect:e.isSelect,index:a},on:{cxGetDataFun:function(t){arguments[0]=t=e.$handleEvent(t),e.cxGetDataFun.apply(void 0,arguments)}}})],1)})),n("getMore",{attrs:{isMore:e.isMore,nullMsg:"已加载全部~"}}),n("v-uni-view",{staticClass:"h200"})],2):n("dataNull",{attrs:{src:"/static/img/dataNull.png",title:"暂无相关客户哦~"}})],1),n("u-action-sheet",{attrs:{list:e.sheetList},model:{value:e.moreShow,callback:function(t){e.moreShow=t},expression:"moreShow"}})],1)},i=[]},9862:function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,"uni-page-body[data-v-7eff589e]{background-color:#f8f8f8}body.?%PAGE?%[data-v-7eff589e]{background-color:#f8f8f8}.card[data-v-7eff589e]{width:%?698?%;padding:%?26?% %?26?% %?10?%;margin:%?32?% %?26?%;box-sizing:border-box;border-radius:%?8?%;box-shadow:#d8d8d8 0 0 %?16?%;position:relative;background-color:#fff}.genjinBtn[data-v-7eff589e]{position:absolute;right:%?26?%;top:%?26?%;background-color:#007aff;color:#fff;text-align:center;padding:%?6?% %?16?%;border-radius:%?6?%;font-size:14px}.genjinBtn[data-v-7eff589e]:active{background-color:#13b8ff}.topRow[data-v-7eff589e]{display:flex;align-items:center;margin-bottom:%?16?%}.txView[data-v-7eff589e]{width:%?128?%;height:%?128?%;border-radius:50%;overflow:hidden;margin-right:%?26?%}.txViewImg[data-v-7eff589e]{width:100%;height:100%}.info[data-v-7eff589e]{width:%?492?%;font-size:15px;color:#000}.name[data-v-7eff589e]{font-size:16px;margin-bottom:%?8?%;color:#000;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}.bottomRow[data-v-7eff589e]{width:100%;padding-top:%?16?%;display:flex;align-items:center;justify-content:space-between;border-top:%?1?% solid #f0f0f0;font-size:15px;color:#007aff}.lxRow[data-v-7eff589e]{display:flex;align-items:center}.lxRow>uni-image[data-v-7eff589e]{width:%?52?%;height:%?52?%;margin-right:%?26?%}.bqRow[data-v-7eff589e]{display:flex;align-items:center;flex-wrap:wrap}.bqRow>uni-text[data-v-7eff589e]{font-size:14px;color:#888}.bqRow>uni-view[data-v-7eff589e]{padding:%?6?% %?16?%;font-size:14px;background-color:rgba(255,85,127,.1);color:#f50;border-radius:%?10?%;margin:%?6?% %?26?% %?20?% 0}",""]),e.exports=t},"9ae5":function(e,t,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d4b5"),n("c223"),n("aa9c"),n("dd2b"),n("e966"),n("3efd");var o=n("d2ab"),i=n("bccf"),r=a(n("ee22")),d=a(n("12ec")),s=a(n("2acf")),u=a(n("1beb")),f=a(n("3fe5")),l=void 0,c={components:{dataNull:r.default,getMore:d.default,topDropdown:s.default,lianxiRow:u.default,threadCard:f.default},data:function(){return{triggered:!1,dropdown1:"全部",options1:[],optionsPx:i.datePxData,sxList:[],list:[],moreShow:!1,sheetList:[{text:"添加跟进"},{text:"添加标签"}],isMore:!0,pageIndex:1,scrollHeight:"667px",pageType:"",sortObj:{update_date:-1},optionsReq:{},dateReq:[],sxReq:JSON.stringify({}),matchObj:{},searchValue:"",isSelect:!1,tabNoEqualArr:[],depId:void 0}},onLoad:function(e){l=this;var t=JSON.stringify(i.threadSxData);l.sxList=JSON.parse(t);var n={status:0};uni.$userInfo.isDepManager?(l.options1=i.cjDropDownData,l.depId=uni.$userInfo.depManager_Id):(l.options1=i.cjDropDownData1,n.cjRenId=uni.$userInfo._id),e.type&&(l.isSelect=!0),l.matchObj=n,l.optionsReq=JSON.stringify(n),l.pageType=e.type?e.type:"",uni.getSystemInfo({success:function(e){l.scrollHeight=e.windowHeight-40+"px"}}),l.selectKehuFun(),uni.$on("deleteKhFun",l.deleteKhFun),uni.$on("updateListByIndex",l.updateListByIndex),uni.$on("addItemInListFun",l.addItemInListFun),uni.$on("cxGetDataFun",l.cxGetDataFun)},onBackPress:function(){uni.$off("deleteKhFun",l.deleteKhFun),uni.$off("updateListByIndex",l.updateListByIndex),uni.$off("addItemInListFun",l.addItemInListFun),uni.$off("cxGetDataFun",l.cxGetDataFun)},methods:{selectKehuFun:function(){var e=this;if(l.isMore){uni.showLoading({title:"加载中...",mask:!0});var t={status:0};Object.assign(t,l.matchObj);var n={matchObj:t,dateReq:l.dateReq,pageIndex:l.pageIndex,depId:l.depId,tabNoEqualArr:l.tabNoEqualArr,sortObj:l.sortObj,searchValue:l.searchValue,isFzrLookup:"$cjRenId"},a={action:"selectThread",params:n};(0,o.threadApi)(a).then((function(t){e.triggered=!1;var n=t.result.data;1==l.pageIndex&&(l.list=[]),20==n.length?(l.pageIndex+=1,l.isMore=!0):l.isMore=!1,l.list=l.list.concat(n)}))}},dropDownFun1:function(e){var t={},n=[],a=uni.$userInfo;l.depId=void 0,"全部"==e.label?l.depId=a.depManager_Id:"我创建的"==e.label?t.cjRenId=a._id:"下属创建"==e.label&&(l.depId=a.depManager_Id,n=[{field:"cjRenId",value:a._id}]),l.tabNoEqualArr=n,l.optionsReq=JSON.stringify(t),l.matchObj=Object.assign(t,JSON.parse(l.sxReq)),l.cxGetDataFun()},optionSxFun:function(e){for(var t=[],n=[],a=0;a<e.length;a++)""===e[a].current||e[a].isDate?""!==e[a].current&&e[a].isDate&&n.push({field:e[a].field,sTime:e[a].sTime,eTime:e[a].eTime}):t.push({field:e[a].field,value:e[a].arr[e[a].current]});var o={};for(a=0;a<t.length;a++)o[t[a].field]=t[a].value;l.dateReq=n,l.sxReq=JSON.stringify(o),l.matchObj=Object.assign(o,JSON.parse(l.optionsReq)),l.cxGetDataFun()},optionPxFun:function(e){for(var t={update_date:-1},n=0;n<e.length;n++)if(""!==e[n].current){t={},"create_date"==e[n].field&&(t.create_date=1==e[n].current?1:-1),"update_date"==e[n].field&&(t.update_date=1==e[n].current?1:-1),"genjin_date"==e[n].field&&(t.genjin_date=1==e[n].current?1:-1),l.sortObj=t;break}l.cxGetDataFun()},searchBoxEmitFun:function(e){l.searchValue=e.searchValue1,l.cxGetDataFun()},onRefresh:function(){l.triggered||(l.triggered=!0,l.cxGetDataFun())},onRestore:function(e){l.triggered=!1},cxGetDataFun:function(){l.pageIndex=1,l.isMore=!0,l.selectKehuFun()},deleteKhFun:function(e){var t=l.list;t.splice(e.index,1),l.list=t},updateListByIndex:function(e){l.$set(l.list,parseInt(e.index),e.obj)},addItemInListFun:function(e){var t=l.list;t.unshift(e),l.list=t,uni.pageScrollTo({scrollTop:0})}}};t.default=c},"9f4b":function(e,t,n){var a=n("9862");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=n("967d").default;o("0d6fb44d",a,!0,{sourceMap:!1,shadowMode:!1})},a831:function(e,t,n){"use strict";n.r(t);var a=n("9ae5"),o=n.n(a);for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=o.a},c4ac:function(e,t,n){"use strict";var a=n("9f4b"),o=n.n(a);o.a},d623:function(e,t,n){"use strict";n.r(t);var a=n("43a5"),o=n("a831");for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n("c4ac");var r=n("828b"),d=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"7eff589e",null,!1,a["a"],void 0);t["default"]=d.exports}}]);