(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-crm-thread-thread"],{"131b":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={topDropdown:n("2acf").default,getMore:n("12ec").default,dataNull:n("ee22").default,addBtn:n("e0c5").default,uActionSheet:n("1db7").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("topDropdown",{attrs:{isSxShow:!0,isPaiXu:!0,dropdown1:e.dropdown1,options1:e.options1,optionsSx:e.sxList,optionsPx:e.optionsPx,isDuoXuan:!0,searchLabel1:"客户名称",searchPh1:"请输入客户名称"},on:{searchBoxEmitFun:function(t){arguments[0]=t=e.$handleEvent(t),e.searchBoxEmitFun.apply(void 0,arguments)},dropDownFun1:function(t){arguments[0]=t=e.$handleEvent(t),e.dropDownFun1.apply(void 0,arguments)},optionSxFun:function(t){arguments[0]=t=e.$handleEvent(t),e.optionSxFun.apply(void 0,arguments)},optionPxFun:function(t){arguments[0]=t=e.$handleEvent(t),e.optionPxFun.apply(void 0,arguments)}}}),n("v-uni-scroll-view",{style:{height:e.scrollHeight},attrs:{"scroll-y":"true","refresher-enabled":!0,"refresher-threshold":200,"refresher-triggered":e.triggered,"refresher-background":"gray"},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.selectKehuFun.apply(void 0,arguments)},refresherrefresh:function(t){arguments[0]=t=e.$handleEvent(t),e.onRefresh.apply(void 0,arguments)},refresherrestore:function(t){arguments[0]=t=e.$handleEvent(t),e.onRestore.apply(void 0,arguments)}}},[e.list.length>0?n("v-uni-view",[e._l(e.list,(function(t,a){return n("v-uni-view",{key:a},[n("threadCard",{attrs:{item:t,isSelect:e.isSelect,index:a},on:{cxGetDataFun:function(t){arguments[0]=t=e.$handleEvent(t),e.cxGetDataFun.apply(void 0,arguments)}}})],1)})),n("getMore",{attrs:{isMore:e.isMore,nullMsg:"已加载全部~"}}),n("v-uni-view",{staticClass:"h200"})],2):n("dataNull",{attrs:{src:"/static/img/dataNull.png",title:"暂无相关客户哦~"}})],1),n("addBtn",{attrs:{url:"./addThread?isAdd=1"}}),n("u-action-sheet",{attrs:{list:e.sheetList},model:{value:e.moreShow,callback:function(t){e.moreShow=t},expression:"moreShow"}})],1)},o=[]},"1d47":function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,".addBtn[data-v-2f041b10]{width:%?88?%;height:%?88?%;border-radius:50%;background-image:linear-gradient(45deg,#007aff,#0af);display:flex;align-items:center;justify-content:center;position:fixed;bottom:%?200?%;right:%?26?%;z-index:100}.addBtn[data-v-2f041b10]:active{background-image:linear-gradient(45deg,#0af,#007aff)}",""]),e.exports=t},"2f77":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uIcon:n("97c4").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"addBtn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoAdd.apply(void 0,arguments)}}},[n("u-icon",{attrs:{name:"plus",color:"#ffffff",size:"40"}})],1)],1)},o=[]},"387b":function(e,t,n){var a=n("f22b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("967d").default;i("7a327822",a,!0,{sourceMap:!1,shadowMode:!1})},"4ca2":function(e,t,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("d4b5"),n("aa9c"),n("c223"),n("dd2b"),n("e966"),n("3efd");var i=n("d2ab"),o=n("bccf"),r=n("0f5e"),d=a(n("ee22")),u=a(n("e0c5")),s=a(n("12ec")),c=a(n("2acf")),l=a(n("1beb")),f=a(n("3fe5")),p=void 0,h={components:{dataNull:d.default,addBtn:u.default,getMore:s.default,topDropdown:c.default,lianxiRow:l.default,threadCard:f.default},data:function(){return{triggered:!1,dropdown1:"全部",options1:o.tyDropDown,optionsPx:o.datePxData,sxList:[],list:[],moreShow:!1,sheetList:[{text:"添加跟进"},{text:"添加标签"}],isMore:!0,pageIndex:1,scrollHeight:"667px",pageType:"",sortObj:{update_date:-1},optionsReq:{},dateReq:[],sxReq:JSON.stringify({}),matchObj:{},searchValue:"",isSelect:!1,tabNoEqualArr:[],depId:void 0}},onLoad:function(e){p=this;var t=JSON.stringify(o.threadSxData);p.sxList=JSON.parse(t);var n={};if(uni.$userInfo.isDepManager?(p.options1=o.tyDropDown,p.depId=uni.$userInfo.depManager_Id):(p.options1=o.dropDownByUser,n.fuZeRenId=uni.$userInfo._id),e.type&&(p.isSelect=!0),p.matchObj=n,p.optionsReq=JSON.stringify(n),p.pageType=e.type?e.type:"",uni.getSystemInfo({success:function(e){p.scrollHeight=e.windowHeight-40+"px"}}),e.next_gjDate){var a=(0,r.getDayByNumFun)(e.next_gjDate),i={field:"next_gjDate",sTime:a[1],eTime:a[0]},d=p.sxList;d[0].current=0,p.sxList=d,p.dateReq.push(i)}else{var u=p.sxList;u[0].current="",p.sxList=u}p.selectKehuFun(),uni.$on("deleteKhFun",p.deleteKhFun),uni.$on("updateListByIndex",p.updateListByIndex),uni.$on("addItemInListFun",p.addItemInListFun),uni.$on("cxGetDataFun",p.cxGetDataFun),uni.$on("threadListChangeFun",p.cxGetDataFun)},onBackPress:function(){uni.$off("deleteKhFun",p.deleteKhFun),uni.$off("updateListByIndex",p.updateListByIndex),uni.$off("addItemInListFun",p.addItemInListFun),uni.$off("cxGetDataFun",p.cxGetDataFun),uni.$off("threadListChangeFun",p.cxGetDataFun)},methods:{selectKehuFun:function(){var e=this;if(p.isMore){uni.showLoading({title:"加载中...",mask:!0});var t={status:1};Object.assign(t,p.matchObj);var n={matchObj:t,dateReq:p.dateReq,pageIndex:p.pageIndex,depId:p.depId,tabNoEqualArr:p.tabNoEqualArr,sortObj:p.sortObj,searchValue:p.searchValue},a={action:"selectThread",params:n};(0,i.threadApi)(a).then((function(t){e.triggered=!1;var n=t.result.data;1==p.pageIndex&&(p.list=[]),20==n.length?(p.pageIndex+=1,p.isMore=!0):p.isMore=!1,p.list=p.list.concat(n)}))}},dropDownFun1:function(e){var t={},n=[],a=uni.$userInfo;p.depId=void 0,"全部"==e.label?p.depId=a.depManager_Id:"我负责的"==e.label?t.fuZeRenId=a._id:"我创建的"==e.label?t.cjRenId=a._id:"下属负责"==e.label?(p.depId=a.depManager_Id,n=[{field:"fuZeRenId",value:a._id}],t.department=a.departmentId):"下属创建"==e.label&&(p.depId=a.depManager_Id,n=[{field:"cjRenId",value:a._id}]),p.tabNoEqualArr=n,p.optionsReq=JSON.stringify(t),p.matchObj=Object.assign(t,JSON.parse(p.sxReq)),p.cxGetDataFun()},optionSxFun:function(e){for(var t=[],n=[],a=0;a<e.length;a++)""===e[a].current||e[a].isDate?""!==e[a].current&&e[a].isDate&&n.push({field:e[a].field,sTime:e[a].sTime,eTime:e[a].eTime}):t.push({field:e[a].field,value:e[a].arr[e[a].current]});var i={};for(a=0;a<t.length;a++)i[t[a].field]=t[a].value;p.dateReq=n,p.sxReq=JSON.stringify(i),p.matchObj=Object.assign(i,JSON.parse(p.optionsReq)),p.cxGetDataFun()},optionPxFun:function(e){for(var t={update_date:-1},n=0;n<e.length;n++)if(""!==e[n].current){t={},"create_date"==e[n].field&&(t.create_date=1==e[n].current?1:-1),"update_date"==e[n].field&&(t.update_date=1==e[n].current?1:-1),"genjin_date"==e[n].field&&(t.genjin_date=1==e[n].current?1:-1),p.sortObj=t;break}p.cxGetDataFun()},searchBoxEmitFun:function(e){p.searchValue=e.searchValue1,p.cxGetDataFun()},onRefresh:function(){p.triggered||(p.triggered=!0,p.cxGetDataFun())},onRestore:function(e){p.triggered=!1},cxGetDataFun:function(){p.pageIndex=1,p.isMore=!0,p.selectKehuFun()},deleteKhFun:function(e){var t=p.list;t.splice(e.index,1),p.list=t},updateListByIndex:function(e){p.$set(p.list,parseInt(e.index),e.obj)},addItemInListFun:function(e){var t=p.list;t.unshift(e),p.list=t,uni.pageScrollTo({scrollTop:0})}}};t.default=h},"6c45":function(e,t,n){"use strict";n.r(t);var a=n("131b"),i=n("d626");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("d082");var r=n("828b"),d=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"57b95933",null,!1,a["a"],void 0);t["default"]=d.exports},"7a7c":function(e,t,n){"use strict";var a=n("d3cd"),i=n.n(a);i.a},"810a":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={props:{url:{type:String}},data:function(){return{}},methods:{gotoAdd:function(){this.url&&uni.navigateTo({url:this.url})}}};t.default=a},d082:function(e,t,n){"use strict";var a=n("387b"),i=n.n(a);i.a},d3cd:function(e,t,n){var a=n("1d47");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("967d").default;i("50af9ca4",a,!0,{sourceMap:!1,shadowMode:!1})},d626:function(e,t,n){"use strict";n.r(t);var a=n("4ca2"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},dccd:function(e,t,n){"use strict";n.r(t);var a=n("810a"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},e0c5:function(e,t,n){"use strict";n.r(t);var a=n("2f77"),i=n("dccd");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("7a7c");var r=n("828b"),d=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"2f041b10",null,!1,a["a"],void 0);t["default"]=d.exports},f22b:function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,"uni-page-body[data-v-57b95933]{background-color:#f8f8f8}body.?%PAGE?%[data-v-57b95933]{background-color:#f8f8f8}.card[data-v-57b95933]{width:%?698?%;padding:%?26?% %?26?% %?10?%;margin:%?32?% %?26?%;box-sizing:border-box;border-radius:%?8?%;box-shadow:#d8d8d8 0 0 %?16?%;position:relative;background-color:#fff}.genjinBtn[data-v-57b95933]{position:absolute;right:%?26?%;top:%?26?%;background-color:#007aff;color:#fff;text-align:center;padding:%?6?% %?16?%;border-radius:%?6?%;font-size:14px}.genjinBtn[data-v-57b95933]:active{background-color:#13b8ff}.topRow[data-v-57b95933]{display:flex;align-items:center;margin-bottom:%?16?%}.txView[data-v-57b95933]{width:%?128?%;height:%?128?%;border-radius:50%;overflow:hidden;margin-right:%?26?%}.txViewImg[data-v-57b95933]{width:100%;height:100%}.info[data-v-57b95933]{width:%?492?%;font-size:15px;color:#000}.name[data-v-57b95933]{font-size:16px;margin-bottom:%?8?%;color:#000;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}.bottomRow[data-v-57b95933]{width:100%;padding-top:%?16?%;display:flex;align-items:center;justify-content:space-between;border-top:%?1?% solid #f0f0f0;font-size:15px;color:#007aff}.lxRow[data-v-57b95933]{display:flex;align-items:center}.lxRow>uni-image[data-v-57b95933]{width:%?52?%;height:%?52?%;margin-right:%?26?%}.bqRow[data-v-57b95933]{display:flex;align-items:center;flex-wrap:wrap}.bqRow>uni-text[data-v-57b95933]{font-size:14px;color:#888}.bqRow>uni-view[data-v-57b95933]{padding:%?6?% %?16?%;font-size:14px;background-color:rgba(255,85,127,.1);color:#f50;border-radius:%?10?%;margin:%?6?% %?26?% %?20?% 0}",""]),e.exports=t}}]);