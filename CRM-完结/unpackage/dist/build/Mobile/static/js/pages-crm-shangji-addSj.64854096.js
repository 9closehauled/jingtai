(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-crm-shangji-addSj"],{"39f4":function(e,i,t){var n=t("a6d2");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=t("967d").default;a("301f0436",n,!0,{sourceMap:!1,shadowMode:!1})},"43f5":function(e,i,t){"use strict";t.r(i);var n=t("b62a"),a=t.n(n);for(var c in n)["default"].indexOf(c)<0&&function(e){t.d(i,e,(function(){return n[e]}))}(c);i["default"]=a.a},"6d9c":function(e,i,t){"use strict";t.r(i);var n=t("db75"),a=t("43f5");for(var c in a)["default"].indexOf(c)<0&&function(e){t.d(i,e,(function(){return a[e]}))}(c);t("bd37");var s=t("828b"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"93c7c226",null,!1,n["a"],void 0);i["default"]=u.exports},a6d2:function(e,i,t){var n=t("c86c");i=n(!1),i.push([e.i,"uni-page-body[data-v-93c7c226]{background-color:#f8f8f8;padding-bottom:%?260?%}body.?%PAGE?%[data-v-93c7c226]{background-color:#f8f8f8}.u-radio[data-v-93c7c226]{width:%?200?%!important}.submitView[data-v-93c7c226]{width:100%;padding:%?16?% 0 %?26?%;background-color:#fff;position:fixed;bottom:0;left:0;border-top:%?1?% solid #f1f1f1;display:flex;align-items:center;justify-content:center;z-index:100}.submitBtn[data-v-93c7c226]{width:%?666?%}.productBox[data-v-93c7c226]{background-color:#fff;margin-top:%?32?%;padding:%?26?% 0}.tjcpName[data-v-93c7c226]{width:%?686?%;height:%?40?%;font-size:16px;font-weight:700;border-left:%?6?% solid #007aff;padding-left:%?12?%;margin-left:%?26?%;margin-top:%?26?%}.cpInput[data-v-93c7c226]{width:%?150?%!important;margin-right:%?12?%}.cpInput>uni-input[data-v-93c7c226]{box-sizing:border-box;border:%?1?% solid #ddd;width:100%;height:%?60?%;border-radius:%?10?%;padding:0 %?10?%}.cpInput1[data-v-93c7c226]{width:%?200?%!important;margin-right:%?12?%}.cpInput1>uni-input[data-v-93c7c226]{box-sizing:border-box;border:%?1?% solid #ddd;width:100%;height:%?60?%;border-radius:%?10?%;padding:0 %?10?%}.clearIcon[data-v-93c7c226]{position:absolute;right:%?6?%;top:%?6?%}.greenPrice[data-v-93c7c226]{font-size:16px;color:#19be6b!important;font-weight:700}.disFlex[data-v-93c7c226]{display:flex;align-items:center;margin-bottom:%?8?%}.inputName[data-v-93c7c226]{color:#adadad;font-size:16px}.addHKQS[data-v-93c7c226]{display:flex;align-items:center;padding:%?16?% %?26?%;font-size:15px;font-weight:700;width:100%;display:flex;align-items:center;justify-content:center}",""]),e.exports=i},b62a:function(e,i,t){"use strict";t("6a54"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t("c223"),t("dd2b"),t("e838"),t("5c47"),t("a1c1"),t("e966"),t("aa9c");var n=t("337a"),a=t("429e"),c="",s={data:function(){return{selectShow:!1,selectList:[],selectType:"",sjName:"",sjPrice:"",clientName:"",clientId:"",clientLxr:"",clientLxrId:"",date:"",chengJiao_date:"",type:"",sjJieduan:"初步沟通",sjLaiYuan:"独立开发",describe:"",num:1,totalPrice:"",cpList:[],cpHzObj:{totalNum:0,price:0,discount:0,sumPrice:0},isTjcp:!1,fuZeRenId:uni.$userInfo._id,fuZeRen:uni.$userInfo.nickname,pageType:"",xgInfoObj:{},clientDisabled:!1,isQywx:!1,external_userid:""}},watch:{cpList:function(e,i){c.cpCalcFun()}},onLoad:function(e){c=this,"update"==e.type&&(c.setDataFun(),c.pageType="update",uni.setNavigationBarTitle({title:"修改商机信息"})),e.clientName&&(c.clientName=e.clientName),e.clientId&&(c.clientId=e.clientId,c.clientDisabled=!0),"true"===e.isQywx&&(c.isQywx=!0),e.external_userid&&(c.external_userid=e.external_userid,c.clientDisabled=!0),uni.$on("sjKehuBindFun",c.sjKehuBindFun),uni.$on("sjLxrBindFun",c.sjLxrBindFun),uni.$on("chanpinBindFun",c.chanpinBindFun)},onBackPress:function(){uni.$off("sjKehuBindFun",c.sjKehuBindFun),uni.$off("sjLxrBindFun",c.sjLxrBindFun),uni.$off("chanpinBindFun",c.chanpinBindFun)},methods:{chooseAddrFun:function(){uni.chooseLocation({success:function(e){c.gjAddr=e.address}})},pickerSelectFun:function(e){"商机阶段"==e?c.selectList=[{value:0,label:"初步沟通(10%)"},{value:1,label:"需求确定(30%)"},{value:2,label:"方案报价(50%)"},{value:3,label:"谈判协商(80%)"},{value:4,label:"赢单(100%)"},{value:5,label:"输单(0%)"},{value:6,label:"无效"}]:"商机来源"==e&&(c.selectList=[{value:0,label:"独立开发"},{value:1,label:"来电咨询"},{value:2,label:"广告宣传"},{value:3,label:"搜索引擎"},{value:4,label:"客户介绍"},{value:5,label:"展会"},{value:6,label:"招标公告"},{value:7,label:"其他"}]),c.selectShow=!0,c.selectType=e},selectConfirmFun:function(e){if("商机来源"==c.selectType)c.sjLaiYuan=e[0].label;else if("商机阶段"==c.selectType){var i=e[0].label;c.setJieDuanFun(i)}},bindDateChange:function(e){c.date=e.detail.value,c.chengJiao_date=new Date(e.detail.value+" 00:00:00").getTime()},valChange:function(e){},selectKehuFun:function(){c.clientDisabled||(c.isQywx?uni.navigateTo({url:"../../../qywxPage/view/qywxClient/qywxClient?type=sj"}):uni.navigateTo({url:"../kehu/kehu?type=sj"}))},sjKehuBindFun:function(e){c.isQywx?(c.external_userid=e.external_userid,c.clientName=e.clientName):(""!=c.clientId&&c.clientId!=e.clientId&&(c.clientLxrId="",c.clientLxr=""),c.clientId=e.clientId,c.clientName=e.clientName)},selectLxrFun:function(){c.clientId?uni.navigateTo({url:"../lianxiren/lianxiren?type=sj&clientId="+c.clientId}):uni.$myModalFun("请先关联客户！")},sjLxrBindFun:function(e){c.clientLxrId=e._id,c.clientLxr=e.lxr_name,c.clientId=e.clientId,c.clientName=e.clientName},addChanPinFun:function(){uni.navigateTo({url:"../../../chanpin/view/shop?type=shangji"}),c.isTjcp=!0},chanpinBindFun:function(e){var i={pName:e.pName,price:e.price,unit:e.unit,cpId:e._id,sellingPrice:e.price,discount:100,num:1,totalPrice:e.price};if(c.isTjcp){for(var t=c.cpList,n=!1,a=0;a<t.length;a++)t[a].cpId==i.cpId&&(n=!0);n?setTimeout((function(){uni.showToast({title:"该产品已存在！",icon:"none",duration:2e3})}),88):(t=t.concat(i),c.cpList=t,setTimeout((function(){uni.pageScrollTo({duration:100,scrollTop:1e5})}),88)),c.isTjcp=!1}},deleteCpFun:function(e){var i=c.cpList[e];i._id?uni.showModal({title:"提示",content:"是否确认要删除该产品？",success:function(t){if(t.confirm){uni.showLoading({title:"加载中..."});var n={action:"deleteCp",params:{_id:i._id}};(0,a.crmShangJiApi)(n).then((function(i){c.cpList.splice(e,1)}))}}}):c.cpList.splice(e,1),c.cpCalcFun()},cpPriceUpdateFun:function(e,i){c.cpList,i.sellingPrice;i.discount=(i.sellingPrice/i.price*100).toFixed(2),c.$set(c.cpList,e,i),c.cpCalcFun()},cpDiscountUpdateFun:function(e,i){c.cpList;var t=i.discount;i.sellingPrice=(i.price*t/100).toFixed(2),c.$set(c.cpList,e,i),c.cpCalcFun()},cpzzkXgFun:function(){c.cpHzObj.sumPrice=(c.cpHzObj.discount*c.cpHzObj.price/100).toFixed(2),c.sjPrice=c.cpHzObj.sumPrice},cpzzPriceXgFun:function(){c.cpHzObj.discount=(c.cpHzObj.sumPrice/c.cpHzObj.price*100).toFixed(2),c.sjPrice=c.cpHzObj.sumPrice},orderPriceXgFun:function(){c.cpList.length>0&&(c.cpHzObj.sumPrice=c.sjPrice,c.cpHzObj.discount=(c.sjPrice/c.cpHzObj.price*100).toFixed(2))},cpCalcFun:function(){for(var e=c.cpList,i=0,t=0,n=0,a=0;a<e.length;a++)e[a].totalPrice=(parseFloat(e[a].sellingPrice)*e[a].num).toFixed(2),i+=parseFloat(e[a].totalPrice),t+=parseFloat(e[a].price)*e[a].num,n+=e[a].num;c.cpHzObj.price=t.toFixed(2),c.cpHzObj.discount=(i/c.cpHzObj.price*100).toFixed(2),"NaN"==c.cpHzObj.discount&&(c.cpHzObj.discount=0),c.cpHzObj.sumPrice=i.toFixed(2),c.cpHzObj.totalNum=n,c.cpList=e,c.sjPrice=0==i?"":i.toFixed(2)},minusFun:function(){uni.showToast({title:"数量不能再减了哦",icon:"none",duration:1e3})},submitBtnFun:function(){if(c.sjName)if(c.clientName)if(c.date)if(c.sjPrice)if(c.sjJieduan)if(c.sjLaiYuan){var e={cpList:c.cpList,req:{sjName:c.sjName,cpNum:c.cpList.length,date:c.date,chengJiao_date:c.chengJiao_date,sjPrice:c.sjPrice,sjJieduan:c.sjJieduan,sjLaiYuan:c.sjLaiYuan,describe:c.describe,clientLxrId:c.clientLxrId,clientLxr:c.clientLxr}},i=(0,n.getDayFun)(),t=(0,n.getNowDate)().nowDate,s=t.split(" "),u=s[0].replace(/-/g,""),l="addShangji";"update"==c.pageType?(l="update",e._id=c.xgInfoObj._id,e.req.update_date=(new Date).getTime(),uni.showLoading({title:"修改中..."})):(e.req.create_date=(new Date).getTime(),e.req.update_date=(new Date).getTime(),e.startDate=i[0],e.endDate=i[1],e.dateStr=parseInt(u),c.isQywx?(e.req.external_userid=c.external_userid,e.req.fuZeRenId=uni.$qwUser.userid,e.req.fuZeRen=uni.$qwUser.name,e.req.cjRenId=uni.$qwUser.userid,e.req.cjRen=uni.$qwUser.name,e.req.qywxData=!0):(e.req.clientId=c.clientId,e.req.fuZeRenId=c.fuZeRenId,e.req.fuZeRen=c.fuZeRen,e.req.cjRen=uni.$userInfo.nickname,e.req.cjRenId=uni.$userInfo._id),uni.showLoading({title:"提交中..."}));var r={action:l,params:e};(0,a.crmShangJiApi)(r).then((function(i){"update"==l?(c.addCzjlFun(),uni.showToast({title:"商机修改成功",icon:"none",duration:1e3,mask:!0}),setTimeout((function(){uni.navigateBack()}),1e3)):(uni.showToast({title:"商机新增成功",icon:"none",duration:1e3,mask:!0}),e.req._id=i.result.id,e.req.clientName=c.clientName,uni.$emit("addSjItemInListFun"),setTimeout((function(){c.isQywx?uni.redirectTo({url:"./detail?index=0&isQywx=true&fromDetail=true&_id="+i.result.id}):uni.redirectTo({url:"./detail?index=0&fromDetail=true&_id="+i.result.id})}),1e3))}))}else uni.$myModalFun("商机来源不能为空，请选择！");else uni.$myModalFun("商机阶段不能为空，请选择！");else uni.$myModalFun("商机金额不能为空，请输入或者添加产品自动计算！");else uni.$myModalFun("预计成交日期不能为空，请选择！");else uni.$myModalFun("商机所属客户不能为空，请选择！");else uni.$myModalFun("商机名称不能为空，请输入！")},addCzjlFun:function(e,i){var t={create_date:(new Date).getTime(),czRen:uni.$userInfo._id,pageType:"business"},n=c.xgInfoObj;t.dataId=n._id,t.type="编辑",t.newUpdate=(new Date).getTime(),t.oldUpdate=n.update_date;var a=[],s="";c.sjName!=n.sjName&&(s='修改 商机名称 ，由 "'+n.sjName+'" 变更为 "'+c.sjName+'"',a.push(s)),c.clientName!=n.clientName&&(s='修改 关联客户 ，由 "'+n.clientName+'" 变更为 "'+c.clientName+'"',a.push(s)),c.clientLxr!=n.clientLxr&&(s='修改 联系人 ，由 "'+n.clientLxr+'" 变更为 "'+c.clientLxr+'"',a.push(s)),c.date!=n.date&&(s='修改 预计成交日期 ，由 "'+n.date+'" 变更为 "'+c.date+'"',a.push(s)),c.sjPrice!=n.sjPrice&&(s='修改 商机金额 ，由 "'+n.sjPrice+'" 变更为 "'+c.sjPrice+'"',a.push(s)),c.sjJieduan!=n.sjJieduan&&(s='修改 商机阶段 ，由 "'+n.sjJieduan+'" 变更为 "'+c.sjJieduan+'"',a.push(s)),c.sjLaiYuan!=n.sjLaiYuan&&(s='修改 商机来源 ，由 "'+n.sjLaiYuan+'" 变更为 "'+c.sjLaiYuan+'"',a.push(s)),c.describe!=n.describe&&(s='修改 备注 ，由 "'+n.describe+'" 变更为 "'+c.describe+'"',a.push(s)),c.fuZeRen!=n.fuZeRen&&(s='修改 负责人 ，由 "'+n.fuZeRen+'" 变更为 "'+c.fuZeRen+'"',a.push(s)),t.content=a,uni.$czjlApiAddFun(t)},setDataFun:function(){c.clientDisabled=!0;var e=uni.$infoObj;c.xgInfoObj=uni.$infoObj,c.isQywx?(c.external_userid=e.external_userid,c.sjName=e.sjName,c.clientName=e.clientName,c.date=e.date,c.chengJiao_date=e.chengJiao_date,c.sjPrice=e.sjPrice,c.setJieDuanFun(e.sjJieduan),c.sjLaiYuan=e.sjLaiYuan,c.describe=e.describe,c.fuZeRenId=e.fuZeRenId,c.fuZeRen=e.fuZeRen):(c.sjName=e.sjName,c.clientName=e.clientName,c.clientId=e.clientId,c.clientLxr=e.clientLxr,c.clientLxrId=e.clientLxrId,c.date=e.date,c.chengJiao_date=e.chengJiao_date,c.sjPrice=e.sjPrice,c.setJieDuanFun(e.sjJieduan),c.sjLaiYuan=e.sjLaiYuan,c.describe=e.describe,c.fuZeRenId=e.fuZeRenId,c.fuZeRen=e.fuZeRen),c.getCpByIdFun()},getCpByIdFun:function(){var e={action:"getCp",params:{sjId:c.xgInfoObj._id}};uni.showLoading({title:"加载中..."}),(0,a.crmShangJiApi)(e).then((function(e){var i=e.result.data;if(i.length>0){for(var t={discount:0,price:0,sumPrice:0,totalNum:0},n=0;n<i.length;n++){var a=i[n];a.discount=(a.sellingPrice/a.price*100).toFixed(2),a.totalPrice=(a.sellingPrice*a.num).toFixed(2),i[n]=a,t.price+=parseFloat(a.price)*a.num,t.sumPrice+=parseFloat(a.sellingPrice)*a.num,t.totalNum+=parseFloat(a.num)}t.discount=t.sumPrice/t.price*100,c.cpHzObj=t,c.cpList=i}}))},setJieDuanFun:function(e){"初步沟通(10%)"==e?c.sjJieduan="初步沟通":"需求确定(30%)"==e?c.sjJieduan="需求确定":"方案报价(50%)"==e?c.sjJieduan="方案报价":"谈判协商(80%)"==e?c.sjJieduan="谈判协商":"赢单(100%)"==e?c.sjJieduan="赢单":"输单(0%)"==e?c.sjJieduan="输单":"无效"==e&&(c.sjJieduan="无效")}}};i.default=s},bd37:function(e,i,t){"use strict";var n=t("39f4"),a=t.n(n);a.a},db75:function(e,i,t){"use strict";t.d(i,"b",(function(){return a})),t.d(i,"c",(function(){return c})),t.d(i,"a",(function(){return n}));var n={uInput:t("a798").default,uIcon:t("5ce6").default,uNumberBox:t("41b0").default,uButton:t("b9f7").default,uSelect:t("f9bb").default},a=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("v-uni-view",[t("v-uni-view",{staticClass:"flex-white-plr26 ptb10 mt32 bdb_f5"},[t("v-uni-text",{staticClass:"mr26"},[e._v("商机名称"),t("v-uni-text",{staticClass:"redXingh"},[e._v("*")])],1),t("u-input",{attrs:{placeholder:"请在此输入"},model:{value:e.sjName,callback:function(i){e.sjName=i},expression:"sjName"}})],1),t("v-uni-view",{staticClass:"flex-white-plr26 ptb20 bdb_f5",class:e.clientDisabled?"disabledStyle":"",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.selectKehuFun.apply(void 0,arguments)}}},[t("v-uni-text",{staticClass:"mr26"},[e._v("关联客户"),t("v-uni-text",{staticClass:"redXingh"},[e._v("*")])],1),t("v-uni-view",{class:e.clientName?"":"cBlack"},[e._v(e._s(e.clientName?e.clientName:"请选择")),t("u-icon",{staticClass:"ml26",attrs:{name:"arrow-right",size:"40",color:"#888888"}})],1)],1),e.isQywx?e._e():t("v-uni-view",{staticClass:"flex-white-plr26 ptb20 bdb_f5",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.selectLxrFun.apply(void 0,arguments)}}},[t("v-uni-text",{staticClass:"mr26"},[e._v("联系人")]),t("v-uni-view",{class:e.clientLxr?"":"cBlack"},[e._v(e._s(e.clientLxr?e.clientLxr:"请选择")),t("u-icon",{staticClass:"ml26",attrs:{name:"arrow-right",size:"40",color:"#888888"}})],1)],1),t("v-uni-view",{staticClass:"flex-white-plr26 ptb20 bdb_f5"},[t("v-uni-text",{staticClass:"mr26"},[e._v("预计成交日期"),t("v-uni-text",{staticClass:"redXingh"},[e._v("*")])],1),t("v-uni-picker",{attrs:{mode:"date",value:e.date,start:"1999-02-15",end:"2100-02-15"},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.bindDateChange.apply(void 0,arguments)}}},[e.date?t("v-uni-view",{staticClass:"w420"},[e._v(e._s(e.date))]):t("v-uni-view",{staticStyle:{color:"#c5c5c5"}},[e._v("请选择预成交日期")])],1),t("u-icon",{staticClass:"ml26",attrs:{name:"calendar",size:"40",color:"#888888"}})],1),t("v-uni-view",{staticClass:"flex-white-plr26 ptb20 mt32 bdb_f5 mr16"},[t("v-uni-text",{staticClass:"mr26"},[e._v("商机金额"),t("v-uni-text",{staticClass:"redXingh"},[e._v("*")])],1),t("u-input",{attrs:{"input-align":"right",placeholder:"请在此输入或添加产品自动计算"},on:{input:function(i){arguments[0]=i=e.$handleEvent(i),e.orderPriceXgFun.apply(void 0,arguments)}},model:{value:e.sjPrice,callback:function(i){e.sjPrice=i},expression:"sjPrice"}})],1),t("v-uni-view",{staticClass:"flex-white-plr26 ptb20 bdb_f5",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.pickerSelectFun("商机阶段")}}},[t("v-uni-text",{staticClass:"mr26"},[e._v("商机阶段"),t("v-uni-text",{staticClass:"redXingh"},[e._v("*")])],1),t("v-uni-view",{class:e.sjJieduan?"":"cBlack"},[e._v(e._s(e.sjJieduan?e.sjJieduan:"请选择")),t("u-icon",{staticClass:"ml26",attrs:{name:"arrow-right",size:"40",color:"#888888"}})],1)],1),t("v-uni-view",{staticClass:"flex-white-plr26 ptb20 bdb_f5",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.pickerSelectFun("商机来源")}}},[t("v-uni-text",{staticClass:"mr26"},[e._v("商机来源"),t("v-uni-text",{staticClass:"redXingh"},[e._v("*")])],1),t("v-uni-view",{class:e.sjLaiYuan?"":"cBlack"},[e._v(e._s(e.sjLaiYuan?e.sjLaiYuan:"请选择")),t("u-icon",{staticClass:"ml26",attrs:{name:"arrow-right",size:"40",color:"#888888"}})],1)],1),e.isQywx?e._e():t("v-uni-view",{staticClass:"flex-white-plr26 ptb20  bdb_f5"},[t("v-uni-text",{staticClass:"mr26"},[e._v("负责人")]),t("v-uni-view",{class:e.fuZeRenId?"":"cBlack"},[e._v(e._s(e.fuZeRen?e.fuZeRen:"请选择")),t("u-icon",{staticClass:"ml26",attrs:{name:"arrow-right",size:"40",color:"#888888"}})],1)],1),t("v-uni-view",{staticClass:"flex-white-plr26-column ptb20 mt32"},[t("v-uni-view",{staticStyle:{"margin-bottom":"8rpx"}},[t("v-uni-text",[e._v("备注")])],1),t("u-input",{attrs:{type:"textarea",border:!0,height:100,"auto-height":!0},model:{value:e.describe,callback:function(i){e.describe=i},expression:"describe"}})],1),t("v-uni-view",{staticClass:"tjcpName"},[t("v-uni-text",[e._v("添加产品")])],1),t("v-uni-view",{staticClass:"productBox"},[e.cpList.length>0?t("v-uni-view",{staticClass:"myCard"},[t("v-uni-view",{staticClass:"cardRow"},[t("v-uni-view",[e._v("总数量：")]),t("v-uni-view",[e._v(e._s(e.cpHzObj.totalNum))])],1),t("v-uni-view",{staticClass:"cardRow"},[t("v-uni-view",[e._v("价格合计：")]),t("v-uni-view",[e._v(e._s(e.cpHzObj.price)+"元")])],1),t("v-uni-view",{staticClass:"cardRow"},[t("v-uni-view",[e._v("总折扣%：")]),t("v-uni-view",{staticClass:"cpInput1"},[t("u-input",{attrs:{type:"number",height:"50",border:!0,clearable:!1,placeholder:"请输入"},on:{input:function(i){arguments[0]=i=e.$handleEvent(i),e.cpzzkXgFun.apply(void 0,arguments)}},model:{value:e.cpHzObj.discount,callback:function(i){e.$set(e.cpHzObj,"discount",i)},expression:"cpHzObj.discount"}})],1)],1),t("v-uni-view",{staticClass:"cardRow"},[t("v-uni-view",[e._v("最终价格：")]),t("v-uni-view",{staticClass:"cpInput1"},[t("u-input",{attrs:{type:"number",height:"50",border:!0,clearable:!1,placeholder:"请输入"},on:{input:function(i){arguments[0]=i=e.$handleEvent(i),e.cpzzPriceXgFun.apply(void 0,arguments)}},model:{value:e.cpHzObj.sumPrice,callback:function(i){e.$set(e.cpHzObj,"sumPrice",i)},expression:"cpHzObj.sumPrice"}})],1)],1)],1):e._e(),e._l(e.cpList,(function(i,n){return t("v-uni-view",{key:n,staticClass:"myCard"},[t("u-icon",{staticClass:"clearIcon",attrs:{name:"close-circle-fill",size:"50",color:"#ff0000"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.deleteCpFun(n)}}}),t("v-uni-view",{staticClass:"cardTopName"},[e._v("产品名称："+e._s(i.pName))]),t("v-uni-view",{staticClass:"cardRow"},[t("v-uni-view",[e._v("产品价格：")]),t("v-uni-view",[e._v(e._s(i.price)+"元/"+e._s(i.unit))])],1),t("v-uni-view",{staticClass:"disFlex"},[t("v-uni-view",{staticClass:"inputName"},[e._v("售价 (元)：")]),t("v-uni-view",{staticClass:"cpInput"},[t("u-input",{attrs:{type:"number",height:"50",border:!0,clearable:!1,placeholder:"请输入"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.cpPriceUpdateFun(n,i)}},model:{value:i.sellingPrice,callback:function(t){e.$set(i,"sellingPrice",t)},expression:"item.sellingPrice"}})],1),t("v-uni-view",{staticClass:"inputName"},[e._v("折扣 (%)：")]),t("v-uni-view",{staticClass:"cpInput"},[t("u-input",{attrs:{type:"number",height:"50",border:!0,clearable:!1,placeholder:"请输入"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.cpDiscountUpdateFun(n,i)}},model:{value:i.discount,callback:function(t){e.$set(i,"discount",t)},expression:"item.discount"}})],1)],1),t("v-uni-view",{staticClass:"cardRow"},[t("v-uni-view",[e._v("产品数量：")]),t("v-uni-view",[t("u-number-box",{attrs:{index:n,"input-width":128,"input-height":60,min:1,max:1e5},on:{change:function(i){arguments[0]=i=e.$handleEvent(i),e.cpCalcFun.apply(void 0,arguments)}},model:{value:i.num,callback:function(t){e.$set(i,"num",t)},expression:"item.num"}})],1)],1),t("v-uni-view",{staticClass:"cardRow"},[t("v-uni-view",[e._v("价格合计：")]),t("v-uni-view",{staticClass:"greenPrice"},[e._v("￥"+e._s(i.totalPrice))])],1)],1)})),t("v-uni-view",{staticClass:"addHKQS",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.addChanPinFun.apply(void 0,arguments)}}},[t("v-uni-text",[e._v("点击添加相关产品")]),t("u-icon",{staticStyle:{"margin-left":"16rpx"},attrs:{name:"plus-circle-fill",color:"#007aff",size:"56"}})],1)],2),t("v-uni-view",{staticClass:"submitView"},[t("u-button",{staticClass:"submitBtn",attrs:{type:"primary",ripple:!0,"ripple-bg-color":"#909399"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.submitBtnFun.apply(void 0,arguments)}}},[e._v(e._s(e.pageType?"保存":"提交"))])],1),t("u-select",{attrs:{list:e.selectList},on:{confirm:function(i){arguments[0]=i=e.$handleEvent(i),e.selectConfirmFun.apply(void 0,arguments)}},model:{value:e.selectShow,callback:function(i){e.selectShow=i},expression:"selectShow"}})],1)},c=[]}}]);