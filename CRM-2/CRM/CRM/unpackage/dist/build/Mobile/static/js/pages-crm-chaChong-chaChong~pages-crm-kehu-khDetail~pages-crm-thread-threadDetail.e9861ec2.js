(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-crm-chaChong-chaChong~pages-crm-kehu-khDetail~pages-crm-thread-threadDetail"],{"026c":function(t,e,i){"use strict";i.r(e);var n=i("91a4"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"06bd":function(t,e,i){var n=i("6569");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("0394e892",n,!0,{sourceMap:!1,shadowMode:!1})},"0d0c":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uActionSheet:i("1db7").default,uSelect:i("ddea").default,lianxiRow:i("1beb").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("u-action-sheet",{attrs:{list:t.sheetList},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sheetFun.apply(void 0,arguments)}},model:{value:t.moreShow,callback:function(e){t.moreShow=e},expression:"moreShow"}}),i("u-select",{attrs:{mode:"single-column","confirm-text":"确认分配","cancel-text":"取消分配",list:t.userList,"value-name":"_id","label-name":"nickname"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.allotConfirmFun.apply(void 0,arguments)}},model:{value:t.allotShow,callback:function(e){t.allotShow=e},expression:"allotShow"}}),i("v-uni-view",{staticClass:"card"},[i("v-uni-view",{staticClass:"topRow1",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoDetailFun(t.item)}}},[i("v-uni-view",[i("v-uni-text",{staticClass:"colorGray"},[t._v("姓名：")]),i("v-uni-text",[t._v(t._s(t.item.Name))]),i("v-uni-text",[t._v(t._s(t.item.lxRen))])],1),i("v-uni-view",[i("v-uni-text",{staticClass:"colorGray"},[t._v("地区：")]),i("v-uni-text",[t._v(t._s(t.item.CityName))])],1),i("v-uni-view",[i("v-uni-text",{staticClass:"colorGray"},[t._v("主营产品：")]),i("v-uni-text",[t._v(t._s(t.item.CategoryName))])],1),i("v-uni-view",{staticClass:"bqRow"},[t.item.Scale?i("v-uni-view",[t._v("规模："+t._s(t.gguimo))]):t._e(),t.item.Loyalty?i("v-uni-view",[t._v("忠诚度："+t._s(t.zzcheng))]):t._e()],1)],1),i("v-uni-view",{staticClass:"bottomRow"},[i("v-uni-view",{staticClass:"lxRow"},[i("lianxiRow",{attrs:{phone:t.item.Mobile}})],1)],1)],1)],1)},o=[]},"188d":function(t,e,i){"use strict";i.r(e);var n=i("0d0c"),a=i("4f82");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("60eb");var s=i("828b"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"62bee892",null,!1,n["a"],void 0);e["default"]=u.exports},"1b1e":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".lxIcon[data-v-0c0e3278]{width:%?52?%;height:%?52?%;margin-right:%?26?%}",""]),t.exports=e},"1beb":function(t,e,i){"use strict";i.r(e);var n=i("7b63"),a=i("026c");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("78ed");var s=i("828b"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"0c0e3278",null,!1,n["a"],void 0);e["default"]=u.exports},"4f82":function(t,e,i){"use strict";i.r(e);var n=i("73d9"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"60eb":function(t,e,i){"use strict";var n=i("06bd"),a=i.n(n);a.a},6569:function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".card[data-v-62bee892]{width:%?698?%;padding:%?26?% %?26?% %?10?%;margin:%?32?% %?26?%;box-sizing:border-box;border-radius:%?16?%;box-shadow:#d8d8d8 0 0 %?16?%;position:relative;background-color:#fff}.genjinBtn[data-v-62bee892]{position:absolute;right:%?26?%;top:%?26?%;background-color:#007aff;color:#fff;text-align:center;padding:%?6?% %?16?%;border-radius:%?6?%;font-size:14px}.genjinBtn[data-v-62bee892]:active{background-color:#13b8ff}.topRow1[data-v-62bee892]{margin-bottom:%?16?%;font-size:15px;color:#000;position:relative}.name[data-v-62bee892]{font-size:16px;margin-bottom:%?8?%;color:#000;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}.bottomRow[data-v-62bee892]{width:100%;padding-top:%?16?%;display:flex;align-items:center;justify-content:space-between;border-top:%?1?% solid #f0f0f0;font-size:15px;color:#007aff}.lxRow[data-v-62bee892]{display:flex;align-items:center}.lxRow>uni-image[data-v-62bee892]{width:%?52?%;height:%?52?%;margin-right:%?26?%}.bqRow[data-v-62bee892]{display:flex;align-items:center;flex-wrap:wrap}.bqRow>uni-text[data-v-62bee892]{font-size:14px;color:#888}.bqRow>uni-view[data-v-62bee892]{padding:%?6?% %?16?%;font-size:14px;background-color:rgba(255,85,127,.1);color:#f50;border-radius:%?10?%;margin:%?6?% %?26?% %?20?% 0}.khJieDuan[data-v-62bee892]{position:absolute;right:0;top:%?50?%;font-weight:700}.khType[data-v-62bee892]{position:absolute;right:0;top:%?72?%;font-weight:700}",""]),t.exports=e},"6b7c":function(t,e,i){var n=i("1b1e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("3ecc9f78",n,!0,{sourceMap:!1,shadowMode:!1})},"73d9":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("bf0f"),i("2797"),i("c223");var n=i("d2ab"),a=i("85e6"),o={props:{item:{type:Object,default:function(){}},isSelect:{type:Boolean,default:!1},index:{type:Number,default:0}},data:function(){return{sheetList:[{text:"添加跟进"},{text:"编辑"},{text:"删除"}],moreShow:!1,allotShow:!1,userList:[],zzcheng:"",gguimo:""}},mounted:function(){var t=this,e=this;this.$http.gets("DataDict/GetList",{DictType:"Loyalty",Token:uni.getStorageSync("WebToken_CRM")}).then((function(t){1==t.Tag&&t.Data[0].Detail.forEach((function(t){t.DictKey==e.item.Loyalty&&(e.zzcheng=t.DictValue)}))})),this.$http.gets("DataDict/GetList",{DictType:"Scale",Token:uni.getStorageSync("WebToken_CRM")}).then((function(i){1==i.Tag&&i.Data[0].Detail.forEach((function(i){i.DictKey==e.item.Scale&&(t.gguimo=i.DictValue)}))}))},methods:{gotoDetailFun:function(t){this.isSelect||(uni.$khInfo=this.item,uni.navigateTo({url:"./khDetail?index=".concat(this.index,"&id=").concat(t.Id)}))},sheetFun:function(t){var e=this.sheetList,i=e[t].text;if("添加跟进"==i)uni.navigateTo({url:"../genJin/add?clientName="+this.item.clientName+"&clientId="+this.item._id+"&pageT=client"});else if("编辑"==i)uni.$infoObj=this.item,uni.navigateTo({url:"./addKeHu?type=update"});else if("删除"==i){var a=this;uni.showModal({title:"提示",content:"是否确认删除客户名称为："+a.item.clientName+"的客户吗?",success:function(t){if(t.confirm){uni.showLoading({title:"删除中...",mask:!0});var e={action:"update",params:{_id:a.item._id,req:{isDelete:1,update_date:(new Date).getTime()}}};(0,n.crmKeHuApi)(e).then((function(t){uni.showToast({title:"删除成功!",duration:1e3,icon:"none"}),uni.$emit("deleteKhFun",{index:a.index}),a.addCzjlFun("删除")}))}}})}else"领取"==i?this.lingquFun():"分配"==i?this.userList.length>0?this.allotShow=!0:this.getUserLisByDepIdtFun():"放入客户池"==i&&this.putInFun()},addCzjlFun:function(t,e){var i={create_date:(new Date).getTime(),czRen:uni.$userInfo._id,pageType:"client",dataId:this.item._id,type:t};e&&e.length>0&&(i.content=e),uni.$czjlApiAddFun(i)},lingquFun:function(){var t=this;uni.showModal({title:"提示",content:"是否确认领取客户名称为："+t.item.clientName+"的客户吗?",success:function(e){if(e.confirm){uni.showLoading({title:"领取中...",mask:!0});var i={action:"update",params:{_id:t.item._id,req:{status:1,fuZeRenId:uni.$userInfo._id,update_date:(new Date).getTime()}}};(0,n.crmKeHuApi)(i).then((function(e){t.addCzjlFun("领取"),t.$emit("cxGetDataFun"),uni.showToast({title:"领取成功！",duration:1600,icon:"none",mask:!0})}))}}})},putInFun:function(){var t=this;uni.showModal({title:"提示",content:"是否确认将客户名称为："+t.item.clientName+"的客户放入客户池吗?",success:function(e){var i=(new Date).getTime();if(e.confirm){uni.showLoading({title:"更新中...",mask:!0});var a={action:"update",params:{_id:t.item._id,req:{status:0,fuZeRenId:"",next_gjDate:"",awaitFollowUp:0,recycle_date:i,update_date:i}}};(0,n.crmKeHuApi)(a).then((function(e){t.addCzjlFun("放入客户池"),t.$emit("cxGetDataFun"),uni.showToast({title:"更新成功！",duration:1600,icon:"none",mask:!0})}))}}})},allotConfirmFun:function(t){var e=t[0],i=this;uni.showModal({title:"提示",content:"是否确认将客户名称为："+i.item.clientName+"的客户分配给 - "+e.label+" - 吗?",success:function(t){var a=(new Date).getTime();if(t.confirm){uni.showLoading({title:"分配中...",mask:!0});var o={action:"update",params:{_id:i.item._id,req:{status:1,fuZeRenId:e.value,update_date:a}}};(0,n.crmKeHuApi)(o).then((function(t){var n=["修改  负责人为 "+e.label];i.addCzjlFun("编辑",n),i.$emit("cxGetDataFun"),uni.showToast({title:"更新成功！",duration:1600,icon:"none",mask:!0})}))}}})},getUserLisByDepIdtFun:function(){var t=this;uni.showLoading({title:"加载中...",mask:!0});var e={action:"getAllUserListByDepID",params:{depId:uni.$userInfo.depManager_Id,status:0}};(0,a.uidUserApi)(e).then((function(e){t.userList=e.result.data,t.allotShow=!0}))}}};e.default=o},"78ed":function(t,e,i){"use strict";var n=i("6b7c"),a=i.n(n);a.a},"7b63":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uActionSheet:i("1db7").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-image",{staticClass:"lxIcon",attrs:{src:"/static/icon/dianhua.png",mode:"aspectFill"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.makePhoneCallFun.apply(void 0,arguments)}}}),i("v-uni-image",{staticClass:"lxIcon",attrs:{src:"/static/icon/duanxin.png",mode:"aspectFill"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.sendMsgFun.apply(void 0,arguments)}}}),i("u-action-sheet",{attrs:{list:t.sheetList},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sheetFun.apply(void 0,arguments)}},model:{value:t.sheetShow,callback:function(e){t.sheetShow=e},expression:"sheetShow"}})],1)},o=[]},"91a4":function(t,e,i){"use strict";i("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("aa9c");var n={props:{phone:""},data:function(){return{sheetShow:!1,sheetList:[],clickType:""}},methods:{sendMsgFun:function(){var t=this.phone;if(t&&0!=t.length){if(Array.isArray(t)){for(var e=[],i=0;i<t.length;i++)e.push({text:t[i]});this.sheetList=e,this.clickType="msg",this.sheetShow=!0}}else uni.$myModalFun("该客户暂未设置联系方式！")},sendEmailFun:function(){},makePhoneCallFun:function(){var t=this.phone;if(t&&0!=t.length){if(Array.isArray(t)){for(var e=[],i=0;i<t.length;i++)e.push({text:t[i]});this.sheetList=e,this.clickType="call",this.sheetShow=!0}}else uni.$myModalFun("该客户暂未设置联系方式！")},sheetFun:function(t){var e=this.sheetList;e[t].text;this.clickType}}};e.default=n}}]);